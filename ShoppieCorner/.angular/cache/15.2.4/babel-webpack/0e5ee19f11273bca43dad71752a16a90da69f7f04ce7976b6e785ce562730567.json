{"ast":null,"code":"import { Cart } from '../shared/model/cart';\nimport { BehaviorSubject } from 'rxjs';\nimport { CartItem } from '../shared/model/Cartitem';\nimport * as i0 from \"@angular/core\";\nexport let CartService = /*#__PURE__*/(() => {\n  class CartService {\n    constructor() {\n      this.cart = new Cart();\n      //subject behaviour rxjs concept\n      this.cartSubject = new BehaviorSubject(this.cart);\n    }\n    //Add to cart method\n    addToCart(product) {\n      let cartItem = this.cart.items.find(item => item.product.id === product.id);\n      if (cartItem) return;\n      this.cart.items.push(new CartItem(product));\n      this.setCartToLocalStorage();\n    }\n    //Remove cart item\n    removeFromCart(productId) {\n      this.cart.items = this.cart.items.filter(item => item.product.id != productId);\n      this.setCartToLocalStorage();\n    }\n    //change quantity\n    changeQuantity(productId, quantity) {\n      let cartItem = this.cart.items.find(item => item.product.id === productId);\n      if (!cartItem) return;\n      cartItem.quantity = quantity;\n      cartItem.price = quantity * cartItem.product.price;\n      this.setCartToLocalStorage();\n    }\n    //clear Cart\n    clearCart() {\n      this.cart = new Cart();\n      this.setCartToLocalStorage();\n    }\n    //get cart obervables means check observable data\n    getCartObservable() {\n      return this.cartSubject.asObservable();\n    }\n    //now set localstorage data\n    setCartToLocalStorage() {\n      this.cart.totalPrice = this.cart.items.reduce((prevSum, currentItem) => prevSum + currentItem.price, 0);\n      this.cart.totalCount = this.cart.items.reduce((prevSum, currentItem) => prevSum + currentItem.quantity, 0);\n      const cartJson = JSON.stringify(this.cart);\n      localStorage.setItem('Cart', cartJson);\n      this.cartSubject.next(this.cart);\n    }\n    //whenever set localstorage data then also get data\n    getCartFromLocalStorage() {\n      const cartJson = localStorage.getItem('Cart');\n      return cartJson ? JSON.parse(cartJson) : new Cart();\n    }\n  }\n  CartService.ɵfac = function CartService_Factory(t) {\n    return new (t || CartService)();\n  };\n  CartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartService,\n    factory: CartService.ɵfac,\n    providedIn: 'root'\n  });\n  return CartService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}